const TelegramBot = require('node-telegram-bot-api');
require('dotenv').config();

// –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞
const bot = new TelegramBot(process.env.BOT_TOKEN, { polling: true });

// –î–∞–Ω–Ω—ã–µ –æ —Ç—Ä–µ–Ω–µ—Ä–µ (–∏–∑ —Å–∞–π—Ç–∞)
const trainerInfo = {
  name: "–õ–∏–ª–∏—è –Ø—Ü–∫–∞—è",
  description: "–ü–æ–º–æ–≥–∞—é –∂–µ–Ω—â–∏–Ω–∞–º –≤–µ—Ä–Ω—É—Ç—å –æ—â—É—â–µ–Ω–∏–µ —Å–∏–ª—ã –∏ –ª—ë–≥–∫–æ—Å—Ç–∏ –≤ —Ç–µ–ª–µ —á–µ—Ä–µ–∑ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∏ –ø—Ä–æ–¥—É–º–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã: –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ —Å—Ç—Ä–µ—Å—Å–∞, —Å –≤–Ω–∏–º–∞–Ω–∏–µ–º –∫ —Ç–µ—Ö–Ω–∏–∫–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É.",
  experience: "–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä",
  specializations: [
    "–ü–æ—Ö—É–¥–µ–Ω–∏–µ –∏ –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —Ñ–∏–≥—É—Ä—ã",
    "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Ä–æ–¥–æ–≤",
    "–°–∏–ª–æ–≤—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏",
    "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–∏–Ω–≥",
    "–ü–∏–ª–∞—Ç–µ—Å",
    "–†–∞—Å—Ç—è–∂–∫–∞ –∏ –≥–∏–±–∫–æ—Å—Ç—å"
  ]
};

// –ü—Ä–æ–≥—Ä–∞–º–º—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ (–∏–∑ —Å–∞–π—Ç–∞)
const trainingPrograms = {
  "sushka_pro": {
    name: "–°—É—à–∫–∞ PRO",
    price: "8,000 ‚ÇΩ",
    duration: "4 –Ω–µ–¥–µ–ª–∏",
    description: "–ú–æ—â–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –¢–∞–±–∞—Ç–∞ –¥–ª—è —Å–∂–∏–≥–∞–Ω–∏—è –∂–∏—Ä–∞",
    features: [
      "8 –º–æ—â–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –¢–∞–±–∞—Ç–∞ (20/10, 40/20)",
      "–ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è, –∑–∞–ø—É—Å–∫–∞—é—â–∏–π —Å–∂–∏–≥–∞–Ω–∏–µ –∂–∏—Ä–∞",
      "–î–æ–º–∞—à–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é",
      "–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞: –º–æ—Ç–∏–≤–∞—Ü–∏—è, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –æ—Ç–≤–µ—Ç—ã –Ω–∞ \"–º–æ–∂–Ω–æ –ª–∏ –±–∞–Ω–∞–Ω?\""
    ]
  },
  "strength_tone": {
    name: "–°–∏–ª–∞ –∏ –¢–æ–Ω—É—Å",
    price: "6,000 ‚ÇΩ ‚Üí 4,200 ‚ÇΩ",
    duration: "4 –Ω–µ–¥–µ–ª–∏",
    description: "–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –º—ã—à—Ü-—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä–æ–≤ –∏ —Ä–∞–±–æ—Ç–∞ —Å –¥—ã—Ö–∞–Ω–∏–µ–º",
    features: [
      "8 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä–æ–≤, –¥—ã—Ö–∞–Ω–∏—è, —Ä–∞—Å—Ç—è–∂–∫–∏",
      "–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ç–∞–∑–æ–≤—ã—Ö –∏ –±—Ä—é—à–Ω—ã—Ö –º—ã—à—Ü –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏",
      "–ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è –¥–ª—è –ª—ë–≥–∫–æ—Å—Ç–∏, —Ç–æ–Ω—É—Å–∞ –∏ –∞–Ω—Ç–∏—Å—Ç—Ä–µ—Å—Å–∞",
      "–ú—è–≥–∫–∞—è, –Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞"
    ],
    featured: true
  },
  "steel_abs": {
    name: "–°—Ç–∞–ª—å–Ω–æ–π –ø—Ä–µ—Å—Å",
    price: "7,200 ‚ÇΩ",
    duration: "4 –Ω–µ–¥–µ–ª–∏",
    description: "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∏ –º—ã—à—Ü –ø—Ä–µ—Å—Å–∞",
    features: [
      "8 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –¥–ª—è –≥–ª—É–±–æ–∫–∏—Ö –º—ã—à—Ü –∂–∏–≤–æ—Ç–∞",
      "–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è",
      "–ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è –¥–ª—è —Ä–µ–ª—å–µ—Ñ–∞ –∏ –ø–ª–æ—Å–∫–æ–≥–æ –∂–∏–≤–æ—Ç–∞",
      "–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–µ—Ö–Ω–∏–∫–∏"
    ]
  },
  "trx_balance": {
    name: "TRX –ë–∞–ª–∞–Ω—Å",
    price: "8,000 ‚ÇΩ ‚Üí 5,600 ‚ÇΩ",
    duration: "4 –Ω–µ–¥–µ–ª–∏",
    description: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TRX-–ø–µ—Ç–µ–ª—å",
    features: [
      "8 –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö TRX —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫",
      "–§–æ–∫—É—Å –Ω–∞ –≥–ª—É–±–æ–∫–∏–µ –º—ã—à—Ü—ã –∏ –±–∞–ª–∞–Ω—Å",
      "–†–∞—Å—Ç—è–∂–∫–∞, –º–æ–±–∏–ª–∏–∑–∞—Ü–∏—è, —Ä–∞–±–æ—Ç–∞ —Å –¥—ã—Ö–∞–Ω–∏–µ–º",
      "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —Ç–µ—Ö–Ω–∏–∫–∏",
      "–ü–∏—Ç–∞–Ω–∏–µ + –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ"
    ]
  },
  "postpartum": {
    name: "–ù–æ–≤–æ–µ —Ç–µ–ª–æ –ø–æ—Å–ª–µ —Ä–æ–¥–æ–≤",
    price: "13,000 ‚ÇΩ",
    duration: "2 –º–µ—Å—è—Ü–∞",
    description: "–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ä–æ–¥–æ–≤",
    features: [
      "–ú—è–≥–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è",
      "–†–∞–±–æ—Ç–∞ —Å –¥–∏–∞—Å—Ç–∞–∑–æ–º",
      "–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ç–∞–∑–æ–≤–æ–≥–æ –¥–Ω–∞",
      "–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞"
    ]
  },
  "stretching": {
    name: "–†–∞—Å—Ç—è–∂–∫–∞ –∏ —à–ø–∞–≥–∞—Ç",
    price: "7,000 ‚ÇΩ",
    duration: "6 –Ω–µ–¥–µ–ª—å",
    description: "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –≥–∏–±–∫–æ—Å—Ç–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è –æ—Å–∞–Ω–∫–∏",
    features: [
      "–†–∞—Å—Ç—è–∂–∫–∞ –≤—Å–µ–≥–æ —Ç–µ–ª–∞",
      "–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å",
      "–†–∞–±–æ—Ç–∞ —Å –æ—Å–∞–Ω–∫–æ–π",
      "–î—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏"
    ]
  },
  "nutrition_analysis": {
    name: "–ê–Ω–∞–ª–∏–∑ —Ç–≤–æ–µ–≥–æ –ø–∏—Ç–∞–Ω–∏—è",
    price: "5,000 ‚ÇΩ",
    duration: "1 –Ω–µ–¥–µ–ª—è",
    description: "–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–∏—Ç–∞–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏",
    features: [
      "–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø–∏—Ç–∞–Ω–∏—è",
      "–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏",
      "–ü–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ –Ω–µ–¥–µ–ª—é",
      "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º"
    ]
  }
};

// –ö–≤–∏–∑ –≤–æ–ø—Ä–æ—Å—ã (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑ Marquiz)
const quizQuestions = [
  {
    id: 1,
    question: "–ö–∞–∫–∞—è —É –≤–∞—Å –æ—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å?",
    options: [
      "–ü–æ—Ö—É–¥–µ—Ç—å –∏ —Å–±—Ä–æ—Å–∏—Ç—å –ª–∏—à–Ω–∏–π –≤–µ—Å",
      "–£–∫—Ä–µ–ø–∏—Ç—å –º—ã—à—Ü—ã –∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ —Ç–µ–ª–æ –≤ —Ç–æ–Ω—É—Å",
      "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø–æ—Å–ª–µ —Ä–æ–¥–æ–≤",
      "–†–∞–∑–≤–∏—Ç—å –≥–∏–±–∫–æ—Å—Ç—å –∏ —É–ª—É—á—à–∏—Ç—å –æ—Å–∞–Ω–∫—É",
      "–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏"
    ]
  },
  {
    id: 2,
    question: "–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã –º–æ–∂–µ—Ç–µ —É–¥–µ–ª—è—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º –≤ –Ω–µ–¥–µ–ª—é?",
    options: [
      "1-2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é",
      "3-4 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é",
      "5-6 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é",
      "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ"
    ]
  },
  {
    id: 3,
    question: "–ì–¥–µ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è?",
    options: [
      "–î–æ–º–∞, –±–µ–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è",
      "–î–æ–º–∞, —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º",
      "–í –∑–∞–ª–µ",
      "–ù–∞ —É–ª–∏—Ü–µ/–Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ"
    ]
  },
  {
    id: 4,
    question: "–ö–∞–∫–æ–π —É –≤–∞—Å —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏?",
    options: [
      "–ù–∞—á–∏–Ω–∞—é—â–∏–π (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–Ω–∏–º–∞–ª—Å—è —Å–ø–æ—Ä—Ç–æ–º)",
      "–ù–∞—á–∞–ª—å–Ω—ã–π (–∑–∞–Ω–∏–º–∞–ª—Å—è, –Ω–æ –¥–∞–≤–Ω–æ)",
      "–°—Ä–µ–¥–Ω–∏–π (—Ä–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–Ω–∏–º–∞—é—Å—å)",
      "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π (–æ–ø—ã—Ç–Ω—ã–π —Å–ø–æ—Ä—Ç—Å–º–µ–Ω)"
    ]
  },
  {
    id: 5,
    question: "–ß—Ç–æ –≤–∞—Å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç?",
    options: [
      "–ë—ã—Å—Ç—Ä—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã",
      "–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ",
      "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç—Ä–µ–Ω–µ—Ä–∞",
      "–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å"
    ]
  }
];

// –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
const userStates = new Map();

// –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
const mainMenu = {
  reply_markup: {
    keyboard: [
      [{ text: "üè† –ì–ª–∞–≤–Ω–∞—è" }, { text: "üí™ –ü—Ä–æ–≥—Ä–∞–º–º—ã" }],
      [{ text: "üß† –ü—Ä–æ–π—Ç–∏ –∫–≤–∏–∑" }, { text: "üë©‚Äçüíº –û —Ç—Ä–µ–Ω–µ—Ä–µ" }],
      [{ text: "üí¨ –û—Ç–∑—ã–≤—ã" }, { text: "‚ùì FAQ" }],
      [{ text: "üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã" }]
    ],
    resize_keyboard: true
  }
};

// –ú–µ–Ω—é –ø—Ä–æ–≥—Ä–∞–º–º
const programsMenu = {
  reply_markup: {
    keyboard: [
      [{ text: "üî• –°—É—à–∫–∞ PRO" }, { text: "üí™ –°–∏–ª–∞ –∏ –¢–æ–Ω—É—Å" }],
      [{ text: "ü´Å –°—Ç–∞–ª—å–Ω–æ–π –ø—Ä–µ—Å—Å" }, { text: "üèãÔ∏è TRX –ë–∞–ª–∞–Ω—Å" }],
      [{ text: "ü§± –ü–æ—Å–ª–µ —Ä–æ–¥–æ–≤" }, { text: "ü§∏ –†–∞—Å—Ç—è–∂–∫–∞" }],
      [{ text: "üçé –ê–Ω–∞–ª–∏–∑ –ø–∏—Ç–∞–Ω–∏—è" }, { text: "üîô –ù–∞–∑–∞–¥" }]
    ],
    resize_keyboard: true
  }
};

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
bot.onText(/\/start/, (msg) => {
  const chatId = msg.chat.id;
  const welcomeText = `üëã –ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç-–ø–æ–º–æ—â–Ω–∏–∫ –õ–∏–ª–∏–∏ –Ø—Ü–∫–æ–π - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ–Ω–µ—Ä–∞.

${trainerInfo.description}

–í—ã–±–µ—Ä–∏—Ç–µ, —á—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç:`;

  bot.sendMessage(chatId, welcomeText, mainMenu);
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
bot.on('message', (msg) => {
  const chatId = msg.chat.id;
  const text = msg.text;
  const userId = msg.from.id;

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–≤–∏–∑–∞
  if (userStates.has(userId) && userStates.get(userId).inQuiz) {
    handleQuizAnswer(chatId, userId, text);
    return;
  }

  switch (text) {
    case "üè† –ì–ª–∞–≤–Ω–∞—è":
      showMainInfo(chatId);
      break;
    case "üí™ –ü—Ä–æ–≥—Ä–∞–º–º—ã":
      showPrograms(chatId);
      break;
    case "üß† –ü—Ä–æ–π—Ç–∏ –∫–≤–∏–∑":
      startQuiz(chatId, userId);
      break;
    case "üë©‚Äçüíº –û —Ç—Ä–µ–Ω–µ—Ä–µ":
      showTrainerInfo(chatId);
      break;
    case "üí¨ –û—Ç–∑—ã–≤—ã":
      showTestimonials(chatId);
      break;
    case "‚ùì FAQ":
      showFAQ(chatId);
      break;
    case "üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã":
      showContacts(chatId);
      break;
    case "üîô –ù–∞–∑–∞–¥":
      bot.sendMessage(chatId, "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª:", mainMenu);
      break;
    default:
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º
      if (text.includes("üî• –°—É—à–∫–∞ PRO")) {
        showProgramDetails(chatId, "sushka_pro");
      } else if (text.includes("üí™ –°–∏–ª–∞ –∏ –¢–æ–Ω—É—Å")) {
        showProgramDetails(chatId, "strength_tone");
      } else if (text.includes("ü´Å –°—Ç–∞–ª—å–Ω–æ–π –ø—Ä–µ—Å—Å")) {
        showProgramDetails(chatId, "steel_abs");
      } else if (text.includes("üèãÔ∏è TRX –ë–∞–ª–∞–Ω—Å")) {
        showProgramDetails(chatId, "trx_balance");
      } else if (text.includes("ü§± –ü–æ—Å–ª–µ —Ä–æ–¥–æ–≤")) {
        showProgramDetails(chatId, "postpartum");
      } else if (text.includes("ü§∏ –†–∞—Å—Ç—è–∂–∫–∞")) {
        showProgramDetails(chatId, "stretching");
      } else if (text.includes("üçé –ê–Ω–∞–ª–∏–∑ –ø–∏—Ç–∞–Ω–∏—è")) {
        showProgramDetails(chatId, "nutrition_analysis");
      } else if (text.includes("üìû –ó–∞–ø–∏—Å–∞—Ç—å—Å—è")) {
        showContactInfo(chatId);
      } else if (text === "üîô –ö –ø—Ä–æ–≥—Ä–∞–º–º–∞–º") {
        showPrograms(chatId);
      } else {
        // –£–±–∏—Ä–∞–µ–º —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ
      }
  }
});

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –≥–ª–∞–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
function showMainInfo(chatId) {
  const text = `üåü *–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!*

–Ø - ${trainerInfo.name}, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –≤–∞–º:

‚úÖ –ü–æ—Ö—É–¥–µ—Ç—å –∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ —Ç–µ–ª–æ –≤ —Ñ–æ—Ä–º—É
‚úÖ –£–∫—Ä–µ–ø–∏—Ç—å –º—ã—à—Ü—ã –∏ —Ä–∞–∑–≤–∏—Ç—å —Å–∏–ª—É
‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø–æ—Å–ª–µ —Ä–æ–¥–æ–≤
‚úÖ –ü–æ–ª—é–±–∏—Ç—å —Å–ø–æ—Ä—Ç –∏ –∑–¥–æ—Ä–æ–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏
‚úÖ –û–±—Ä–µ—Å—Ç–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ

*–ú–æ–π –ø–æ–¥—Ö–æ–¥:*
‚Ä¢ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
‚Ä¢ –í–Ω–∏–º–∞–Ω–∏–µ –∫ —Ç–µ—Ö–Ω–∏–∫–µ
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
‚Ä¢ –ë–µ–∑ –ª–∏—à–Ω–µ–≥–æ —Å—Ç—Ä–µ—Å—Å–∞

*–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?* –ü—Ä–æ–π–¥–∏—Ç–µ –∫–≤–∏–∑, —á—Ç–æ–±—ã —è –ø–æ–¥–æ–±—Ä–∞–ª–∞ –∏–¥–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –∏–º–µ–Ω–Ω–æ –¥–ª—è –≤–∞—Å!`;

  bot.sendMessage(chatId, text, { parse_mode: 'Markdown', ...mainMenu });
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –ø—Ä–æ–≥—Ä–∞–º–º
function showPrograms(chatId) {
  const text = `üí™ *–ü—Ä–æ–≥—Ä–∞–º–º—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫*

–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥—Ö–æ–¥–∏—Ç –∏–º–µ–Ω–Ω–æ –≤–∞–º:`;

  bot.sendMessage(chatId, text, { parse_mode: 'Markdown', ...programsMenu });
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –¥–µ—Ç–∞–ª–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
function showProgramDetails(chatId, programKey) {
  const program = trainingPrograms[programKey];
  if (!program) return;

  const featuredText = program.featured ? "\n‚≠ê *–°–ê–ú–´–ô –ü–û–ü–£–õ–Ø–†–ù–´–ô*" : "";
  const text = `*${program.name}*${featuredText}

üí∞ *–¶–µ–Ω–∞:* ${program.price}
‚è± *–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:* ${program.duration}

üìù *–û–ø–∏—Å–∞–Ω–∏–µ:*
${program.description}

‚úÖ *–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç:*
${program.features.map(item => `‚Ä¢ ${item}`).join('\n')}

üìû *–î–ª—è –∑–∞–ø–∏—Å–∏:* @liliya_fit_trainer`;

  const menu = {
    reply_markup: {
      keyboard: [
        [{ text: "üìû –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º—É" }, { text: "üîô –ö –ø—Ä–æ–≥—Ä–∞–º–º–∞–º" }]
      ],
      resize_keyboard: true
    }
  };

  bot.sendMessage(chatId, text, { parse_mode: 'Markdown', ...menu });
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –∫–≤–∏–∑–∞
function startQuiz(chatId, userId) {
  userStates.set(userId, {
    inQuiz: true,
    currentQuestion: 0,
    answers: []
  });

  const question = quizQuestions[0];
  const keyboard = {
    reply_markup: {
      keyboard: question.options.map((option, index) => [{ text: `${index + 1}. ${option}` }]),
      resize_keyboard: true,
      one_time_keyboard: true
    }
  };

  const text = `üß† *–ö–≤–∏–∑: –ü–æ–¥–±–æ—Ä –∏–¥–µ–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã*

*–í–æ–ø—Ä–æ—Å 1 –∏–∑ ${quizQuestions.length}:*
${question.question}

–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:`;

  bot.sendMessage(chatId, text, { parse_mode: 'Markdown', ...keyboard });
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∫–≤–∏–∑–∞
function handleQuizAnswer(chatId, userId, text) {
  const userState = userStates.get(userId);
  const currentQuestionIndex = userState.currentQuestion;
  const question = quizQuestions[currentQuestionIndex];

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ—Ç–≤–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–º
  const answerIndex = parseInt(text) - 1;
  if (isNaN(answerIndex) || answerIndex < 0 || answerIndex >= question.options.length) {
    bot.sendMessage(chatId, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (1, 2, 3, 4 –∏–ª–∏ 5).");
    return;
  }

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç
  userState.answers.push({
    questionId: question.id,
    answer: answerIndex,
    answerText: question.options[answerIndex]
  });

  // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
  userState.currentQuestion++;

  if (userState.currentQuestion < quizQuestions.length) {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
    const nextQuestion = quizQuestions[userState.currentQuestion];
    const keyboard = {
      reply_markup: {
        keyboard: nextQuestion.options.map((option, index) => [{ text: `${index + 1}. ${option}` }]),
        resize_keyboard: true,
        one_time_keyboard: true
      }
    };

    const text = `*–í–æ–ø—Ä–æ—Å ${userState.currentQuestion + 1} –∏–∑ ${quizQuestions.length}:*
${nextQuestion.question}

–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:`;

    bot.sendMessage(chatId, text, { parse_mode: 'Markdown', ...keyboard });
  } else {
    // –ö–≤–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    showQuizResult(chatId, userId);
  }
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∫–≤–∏–∑–∞
function showQuizResult(chatId, userId) {
  const userState = userStates.get(userId);
  const answers = userState.answers;

  // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç—ã –∏ –ø–æ–¥–±–∏—Ä–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É
  let recommendedProgram = "strength_tone"; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
  let recommendationText = "";

  // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–¥–±–æ—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–æ–≤
  const goalAnswer = answers[0].answerText;
  const timeAnswer = answers[1].answerText;
  const placeAnswer = answers[2].answerText;
  const levelAnswer = answers[3].answerText;

  if (goalAnswer.includes("–ü–æ—Ö—É–¥–µ—Ç—å")) {
    recommendedProgram = "sushka_pro";
    recommendationText = "–î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏ –ø–æ—Ö—É–¥–µ–Ω–∏—è –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞ '–°—É—à–∫–∞ PRO' —Å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–º–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏ –¢–∞–±–∞—Ç–∞.";
  } else if (goalAnswer.includes("–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø–æ—Å–ª–µ —Ä–æ–¥–æ–≤")) {
    recommendedProgram = "postpartum";
    recommendationText = "–î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ä–æ–¥–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É '–ù–æ–≤–æ–µ —Ç–µ–ª–æ –ø–æ—Å–ª–µ —Ä–æ–¥–æ–≤'.";
  } else if (goalAnswer.includes("–£–∫—Ä–µ–ø–∏—Ç—å –º—ã—à—Ü—ã")) {
    recommendedProgram = "strength_tone";
    recommendationText = "–î–ª—è —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è –º—ã—à—Ü –∏ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–µ–ª–∞ –≤ —Ç–æ–Ω—É—Å –ø–æ–¥–æ–π–¥–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞ '–°–∏–ª–∞ –∏ –¢–æ–Ω—É—Å'.";
  } else if (goalAnswer.includes("–†–∞–∑–≤–∏—Ç—å –≥–∏–±–∫–æ—Å—Ç—å")) {
    recommendedProgram = "stretching";
    recommendationText = "–î–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –≥–∏–±–∫–æ—Å—Ç–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è –æ—Å–∞–Ω–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É '–†–∞—Å—Ç—è–∂–∫–∞ –∏ —à–ø–∞–≥–∞—Ç'.";
  } else if (goalAnswer.includes("–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ")) {
    recommendedProgram = "nutrition_analysis";
    recommendationText = "–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –ø–∏—Ç–∞–Ω–∏—è –Ω–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ–≥—Ä–∞–º–º—ã '–ê–Ω–∞–ª–∏–∑ —Ç–≤–æ–µ–≥–æ –ø–∏—Ç–∞–Ω–∏—è'.";
  }

  const program = trainingPrograms[recommendedProgram];
  const featuredText = program.featured ? "\n‚≠ê *–°–ê–ú–´–ô –ü–û–ü–£–õ–Ø–†–ù–´–ô*" : "";

  const text = `üéâ *–†–µ–∑—É–ª—å—Ç–∞—Ç –∫–≤–∏–∑–∞*

${recommendationText}

*–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞:*
*${program.name}*${featuredText}

üí∞ *–¶–µ–Ω–∞:* ${program.price}
‚è± *–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:* ${program.duration}

üìù *–û–ø–∏—Å–∞–Ω–∏–µ:*
${program.description}

‚úÖ *–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç:*
${program.features.map(item => `‚Ä¢ ${item}`).join('\n')}

*–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?* –°–≤—è–∂–∏—Ç–µ—Å—å —Å–æ –º–Ω–æ–π –¥–ª—è –∑–∞–ø–∏—Å–∏!`;

  const menu = {
    reply_markup: {
      inline_keyboard: [
        [
          {
            text: "üìû –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º—É",
            url: "https://t.me/+79152994659"
          }
        ],
        [
          {
            text: "üí™ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã",
            callback_data: "show_all_programs"
          }
        ],
        [
          {
            text: "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",
            callback_data: "main_menu"
          }
        ]
      ]
    }
  };

  bot.sendMessage(chatId, text, { parse_mode: 'Markdown', ...menu });

  // –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  userStates.delete(userId);
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–µ–Ω–µ—Ä–µ
function showTrainerInfo(chatId) {
  const text = `üë©‚Äçüíº *–û —Ç—Ä–µ–Ω–µ—Ä–µ*

*${trainerInfo.name}*
${trainerInfo.experience}

${trainerInfo.description}

*–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:*
${trainerInfo.specializations.map(item => `‚Ä¢ ${item}`).join('\n')}

*–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –º–µ–Ω—è:*
‚Ä¢ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∫–∞–∂–¥–æ–º—É
‚Ä¢ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
‚Ä¢ –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è
‚Ä¢ –†–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

*–ú–æ–π –ø–æ–¥—Ö–æ–¥ –∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º:*
–í—Å–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî –æ–Ω–ª–∞–π–Ω, 1 –Ω–∞ 1 —Å —Ç—Ä–µ–Ω–µ—Ä–æ–º. –Ø –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å —Ç–æ–±–æ–π –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞–Ω—è—Ç–∏–∏:
‚úÖ –Ø –≤—Å—ë –≤–∏–∂—É
‚úÖ –Ø –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é —Ç–µ—Ö–Ω–∏–∫—É
‚úÖ –Ø –ø–æ–¥–±–∏—Ä–∞—é —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∏–º–µ–Ω–Ω–æ –ø–æ–¥ —Ç–µ–±—è
‚úÖ –Ø –∑–Ω–∞—é, –∫–æ–≥–¥–∞ —Ç—ã –º–æ–∂–µ—à—å –±–æ–ª—å—à–µ ‚Äî –∏ –º—è–≥–∫–æ –≤–µ–¥—É —Ç—É–¥–∞

üìû *–°–≤—è–∑–∞—Ç—å—Å—è:* @liliya_fit_trainer`;

  bot.sendMessage(chatId, text, { parse_mode: 'Markdown', ...mainMenu });
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏
function showContactInfo(chatId) {
  const text = `üìû *–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º—É*

*–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä –õ–∏–ª–∏—è –Ø—Ü–∫–∞—è*

üì± *Telegram:* @liliya_fit_trainer
üìû *–¢–µ–ª–µ—Ñ–æ–Ω:* +7 (915) 299-46-59
üìß *Email:* liliya@fitnesstrainer.com
üåê *–°–∞–π—Ç:* https://lili-superfit.com

*–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –ø—É—Ç—å –∫ —Ñ–æ—Ä–º–µ?*
–î–∞–≤–∞–π—Ç–µ –æ–±—Å—É–¥–∏–º –≤–∞—à–∏ —Ü–µ–ª–∏ –∏ –ø–æ–¥–±–µ—Ä—ë–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∏–º–µ–Ω–Ω–æ –¥–ª—è –≤–∞—Å!

*–ß—Ç–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å:*
üì∏ –§–æ—Ç–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
üìè –ò–∑–º–µ—Ä–µ–Ω–∏—è —Ç–µ–ª–∞ (—Ç–∞–ª–∏—è, –±—ë–¥—Ä–∞, –Ω–æ–≥–∏, –∏–∫—Ä—ã)
üìã –ê–Ω–∫–µ—Ç–∞ –∑–¥–æ—Ä–æ–≤—å—è (–ø—Ä–∏—à–ª—é —Ñ–æ—Ä–º—É)

*–í–∞—à –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –≤–∫–ª—é—á–∞–µ—Ç:*
üí™ –î–≤–∞ –æ–Ω–ª–∞–π–Ω-–∑–∞–Ω—è—Ç–∏—è –≤ –Ω–µ–¥–µ–ª—é –ø–æ 30 –º–∏–Ω—É—Ç
üìä –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è
üìà –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
ü§ù –ü–æ—Å—Ç–æ—è–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—é

*–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –¥–ª—è —Å–≤—è–∑–∏:*`;

  const menu = {
    reply_markup: {
      inline_keyboard: [
        [
          {
            text: "üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram",
            url: "https://t.me/liliya_fit_trainer"
          }
        ],
        [
          {
            text: "üìû –ü–µ—Ä–µ–π—Ç–∏ –≤ —á–∞—Ç +7 (915) 299-46-59",
            url: "https://t.me/+79152994659"
          }
        ],
        [
          {
            text: "üì± WhatsApp +7 (915) 299-46-59",
            url: "https://wa.me/79152994659"
          }
        ],
        [
          {
            text: "üåê –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç",
            url: "https://lili-superfit.com"
          }
        ],
        [
          {
            text: "üîô –ù–∞–∑–∞–¥ –∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º",
            callback_data: "back_to_programs"
          }
        ]
      ]
    }
  };

  bot.sendMessage(chatId, text, { parse_mode: 'Markdown', ...menu });
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
function showContacts(chatId) {
  const text = `üìû *–ö–æ–Ω—Ç–∞–∫—Ç—ã*

*–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä –õ–∏–ª–∏—è –Ø—Ü–∫–∞—è*

üì± *Telegram:* @liliya_fit_trainer
üìß *Email:* liliya@fitnesstrainer.com
üåê *–°–∞–π—Ç:* https://lili-superfit.com

*–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –ø—É—Ç—å –∫ —Ñ–æ—Ä–º–µ?*
–î–∞–≤–∞–π—Ç–µ –æ–±—Å—É–¥–∏–º –≤–∞—à–∏ —Ü–µ–ª–∏ –∏ –ø–æ–¥–±–µ—Ä—ë–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∏–º–µ–Ω–Ω–æ –¥–ª—è –≤–∞—Å!

*–ß—Ç–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å:*
üì∏ –§–æ—Ç–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
üìè –ò–∑–º–µ—Ä–µ–Ω–∏—è —Ç–µ–ª–∞ (—Ç–∞–ª–∏—è, –±—ë–¥—Ä–∞, –Ω–æ–≥–∏, –∏–∫—Ä—ã)
üìã –ê–Ω–∫–µ—Ç–∞ –∑–¥–æ—Ä–æ–≤—å—è (–ø—Ä–∏—à–ª—é —Ñ–æ—Ä–º—É)

*–í–∞—à –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –≤–∫–ª—é—á–∞–µ—Ç:*
üí™ –î–≤–∞ –æ–Ω–ª–∞–π–Ω-–∑–∞–Ω—è—Ç–∏—è –≤ –Ω–µ–¥–µ–ª—é –ø–æ 30 –º–∏–Ω—É—Ç
üìä –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è
üìà –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
ü§ù –ü–æ—Å—Ç–æ—è–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—é`;

  bot.sendMessage(chatId, text, { parse_mode: 'Markdown', ...mainMenu });
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –æ—Ç–∑—ã–≤–æ–≤
function showTestimonials(chatId) {
  const testimonials = [
    "¬´–Ø –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ —Å–µ–±—è —Ç–∞–∫–æ–π —Å–∏–ª—å–Ω–æ–π! –õ–∏–ª–∏—è –±–µ—Ä–µ–∂–Ω–æ, –Ω–æ —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤–µ–ª–∞ –º–µ–Ω—è, –æ–±—ä—è—Å–Ω—è–ª–∞ —Ç–µ—Ö–Ω–∏–∫—É –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ. –ú–∏–Ω—É—Å 7 –∫–≥ –∏ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –∏–Ω–æ–µ –æ—â—É—â–µ–Ω–∏–µ —Ç–µ–ª–∞ ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É—é!¬ª",
    "¬´–ó–∞–Ω—è—Ç–∏—è 1 –Ω–∞ 1 —Å –õ–∏–ª–∏–µ–π ‚Äî —ç—Ç–æ —Ç–æ, —á–µ–≥–æ –º–Ω–µ –Ω–µ —Ö–≤–∞—Ç–∞–ª–æ. –ù–∏–∫–∞–∫–∏—Ö —Å–æ–º–Ω–µ–Ω–∏–π –∏ —Ö–∞–æ—Å–∞: —á—ë—Ç–∫–∏–π –ø–ª–∞–Ω, –≤–Ω–∏–º–∞–Ω–∏–µ –∫ —Ç–µ—Ö–Ω–∏–∫–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ. –ú–∏–Ω—É—Å 6 –∫–≥ –∑–∞ –º–µ—Å—è—Ü –∏ –æ—â—É—â–µ–Ω–∏–µ —Å–∏–ª—ã –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ —Ç–µ–ª–æ–º ‚Äî —è –≤ –≤–æ—Å—Ç–æ—Ä–≥–µ!¬ª",
    "¬´–ó–∞ 2 –º–µ—Å—è—Ü–∞ —Å –õ–∏–ª–∏–µ–π —è –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ—Ö—É–¥–µ–ª–∞ –Ω–∞ 8 –∫–≥, –Ω–æ –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–º–µ–Ω–∏–ª–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —Å–ø–æ—Ä—Ç—É. –¢–µ–ø–µ—Ä—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî —ç—Ç–æ –Ω–µ –º—É—á–µ–Ω–∏–µ, –∞ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ. –¢–µ–ª–æ —Å—Ç–∞–ª–æ –ø–æ–¥—Ç—è–Ω—É—Ç—ã–º, –∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ ‚Äî –æ—Ç–ª–∏—á–Ω—ã–º!¬ª",
    "¬´–õ–∏–ª–∏—è –ø–æ–º–æ–≥–ª–∞ –º–Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø–æ—Å–ª–µ —Ä–æ–¥–æ–≤. –ó–∞ 3 –º–µ—Å—è—Ü–∞ —è –≤–µ—Ä–Ω—É–ª–∞ –ø—Ä–µ–∂–Ω—é—é —Ñ–æ—Ä–º—É –∏ –¥–∞–∂–µ —Å—Ç–∞–ª–∞ –ª—É—á—à–µ! –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ –º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è. –û—á–µ–Ω—å —Ä–µ–∫–æ–º–µ–Ω–¥—É—é!¬ª",
    "¬´–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–≤–∑–æ—à–µ–ª –≤—Å–µ –æ–∂–∏–¥–∞–Ω–∏—è! –ó–∞ –º–µ—Å—è—Ü —Å –õ–∏–ª–∏–µ–π —è —Å–±—Ä–æ—Å–∏–ª–∞ 5 –∫–≥ –∏ –æ–±—Ä–µ–ª–∞ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—É—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ. –ö–∞–∂–¥–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ ‚Äî —ç—Ç–æ —à–∞–≥ –∫ –ª—É—á—à–µ–π –≤–µ—Ä—Å–∏–∏ —Å–µ–±—è!¬ª",
    "¬´–õ–∏–ª–∏—è ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç—Ä–µ–Ω–µ—Ä, –∞ –Ω–∞—Å—Ç–æ—è—â–∏–π –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫! –í—Å–µ–≥–æ –∑–∞ 1 –º–µ—Å—è—Ü —è –Ω–µ —Ç–æ–ª—å–∫–æ —Å–±—Ä–æ—Å–∏–ª–∞ 4 –∫–≥, –Ω–æ –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–º–µ–Ω–∏–ª–∞ –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏. –¢–µ–ø–µ—Ä—å —è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è —ç–Ω–µ—Ä–≥–∏—á–Ω–æ–π –∏ —Å—á–∞—Å—Ç–ª–∏–≤–æ–π –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!¬ª",
    "¬´–ë–ª–∞–≥–æ–¥–∞—Ä—è –õ–∏–ª–∏–∏ —è –ø–æ–Ω—è–ª–∞, —á—Ç–æ —Å–ø–æ—Ä—Ç ‚Äî —ç—Ç–æ –Ω–µ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ, –∞ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ! –ó–∞ –ø–æ–ª—Ç–æ—Ä–∞ –º–µ—Å—è—Ü–∞ —è –ø–æ—Ö—É–¥–µ–ª–∞ –Ω–∞ 5 –∫–≥ –∏ –æ–±—Ä–µ–ª–∞ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—É—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ. –ö–∞–∂–¥–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ ‚Äî —ç—Ç–æ —à–∞–≥ –∫ –ª—É—á—à–µ–π –≤–µ—Ä—Å–∏–∏ —Å–µ–±—è!¬ª"
  ];

  const randomTestimonial = testimonials[Math.floor(Math.random() * testimonials.length)];
  
  const text = `üí¨ *–û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤*

${randomTestimonial}

*–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ—Ç–∑—ã–≤–æ–≤?*
–ü–æ—Å–µ—Ç–∏—Ç–µ –Ω–∞—à —Å–∞–π—Ç: https://lili-superfit.com

*–ì–æ—Ç–æ–≤—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —É—Å–ø–µ—à–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º?*
–ü—Ä–æ–π–¥–∏—Ç–µ –∫–≤–∏–∑ –∏ –Ω–∞—á–Ω–∏—Ç–µ —Å–≤–æ–π –ø—É—Ç—å –∫ –∏–¥–µ–∞–ª—å–Ω–æ–π —Ñ–æ—Ä–º–µ!`;

  const menu = {
    reply_markup: {
      keyboard: [
        [{ text: "üß† –ü—Ä–æ–π—Ç–∏ –∫–≤–∏–∑" }, { text: "üí™ –ü—Ä–æ–≥—Ä–∞–º–º—ã" }],
        [{ text: "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" }]
      ],
      resize_keyboard: true
    }
  };

  bot.sendMessage(chatId, text, { parse_mode: 'Markdown', ...menu });
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ FAQ
function showFAQ(chatId) {
  const text = `‚ùì *–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã*

*–ö–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å —Å–æ –º–Ω–æ–π?*
‚Ä¢ –ü–æ—Ö—É–¥–µ—Ç—å
‚Ä¢ –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–ª—å–µ—Ñ –∏ —Ä–∞–∑–≤–∏—Ç—å —Å–∏–ª—É
‚Ä¢ –£–∫—Ä–µ–ø–∏—Ç—å —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—É—é —Å–∏—Å—Ç–µ–º—É
‚Ä¢ –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ –Ω–∞–≤—Å–µ–≥–¥–∞
‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø–æ—Å–ª–µ —Ä–æ–¥–æ–≤

*–ö–æ–º—É –ø–æ–¥–æ–π–¥—É—Ç –º–æ–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã?*
‚Ä¢ –ï—Å–ª–∏ –Ω–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –¥–æ–ª–≥–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
‚Ä¢ –ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ—à—å —Å–æ–±—Ä–∞—Ç—å—Å—è —Å —Å–∏–ª–∞–º–∏ –∏ –Ω–∞—á–∞—Ç—å
‚Ä¢ –ï—Å–ª–∏ —Ä–∞–Ω—å—à–µ –Ω–∞—á–∏–Ω–∞–ª–∞, –Ω–æ –±—Ä–æ—Å–∞–ª–∞
‚Ä¢ –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∑–∞–Ω–∏–º–∞—Ç—å—Å—è, –Ω–æ –Ω–µ –∑–Ω–∞–µ—à—å —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å
‚Ä¢ –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –ø—Ä–æ—Å—Ç–æ–π –ø–ª–∞–Ω

*–ö–∞–∫ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏?*
–í—Å–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî –æ–Ω–ª–∞–π–Ω, 1 –Ω–∞ 1 —Å —Ç—Ä–µ–Ω–µ—Ä–æ–º. –Ø –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å —Ç–æ–±–æ–π –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞–Ω—è—Ç–∏–∏, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é —Ç–µ—Ö–Ω–∏–∫—É –∏ –ø–æ–¥–±–∏—Ä–∞—é —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∏–º–µ–Ω–Ω–æ –ø–æ–¥ —Ç–µ–±—è.

*–ö–∞–∫–æ–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å?*
–í—Å–µ –∑–∞–Ω—è—Ç–∏—è –º–æ–∂–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –¥–æ–º–∞, –±–µ–∑ —Å–ª–æ–∂–Ω–æ–≥–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è. –ù–∞ –∫—É—Ä—Å–µ –¥–∞–Ω—ã —Å–ø–∏—Å–æ–∫ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ–∫—É–ø–∫–µ –∏–ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–æ–º–∞—à–Ω–∏–µ –∞–Ω–∞–ª–æ–≥–∏.

*–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?* –ü—Ä–æ–π–¥–∏—Ç–µ –∫–≤–∏–∑ –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ –∏–¥–µ–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã!`;

  const menu = {
    reply_markup: {
      keyboard: [
        [{ text: "üß† –ü—Ä–æ–π—Ç–∏ –∫–≤–∏–∑" }, { text: "üí™ –ü—Ä–æ–≥—Ä–∞–º–º—ã" }],
        [{ text: "üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã" }, { text: "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" }]
      ],
      resize_keyboard: true
    }
  };

  bot.sendMessage(chatId, text, { parse_mode: 'Markdown', ...menu });
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ callback –∫–Ω–æ–ø–æ–∫
bot.on('callback_query', (callbackQuery) => {
  const message = callbackQuery.message;
  const chatId = message.chat.id;
  const data = callbackQuery.data;

  if (data === 'back_to_programs') {
    showPrograms(chatId);
  } else if (data === 'show_all_programs') {
    showPrograms(chatId);
  } else if (data === 'main_menu') {
    showMainInfo(chatId);
  }

  // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –ø–æ–ª—É—á–µ–Ω–∏–µ callback
  bot.answerCallbackQuery(callbackQuery.id);
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
bot.on('polling_error', (error) => {
  console.log('Polling error:', error);
});

console.log('ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!');